<!DOCTYPE html>
<html>
  <head>
    <title>Bible Trivia</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  </head>

  <body>
    <header>
      <nav>
        <%= link_to 'Home', root_path %>
        <%= link_to 'Categories', categories_path %>
        <%= link_to 'Questions', questions_path %>
      </nav>
    </header>

    <main>
      <div class="home-container">
        <h1>Welcome to Bible Trivia</h1>
        <p class="tagline">Deepen your biblical knowledge through engaging trivia!</p>

        <div class="cta-container">
          <div class="cta-box">
            <h2>New to Bible Trivia?</h2>
            <p>Join our community and unlock all features!</p>
            <a href="#" class="button primary-button signup-button">Create an Account</a>
          </div>
          <div class="cta-box">
            <h2>Already a Member?</h2>
            <p>Welcome back! Continue your biblical journey.</p>
            <a href="#" class="button secondary-button login-button">Log In</a>
          </div>
          <div class="cta-box">
            <h2>Just Want to Play?</h2>
            <p>Start a quick game with random questions!</p>
            <%= link_to 'Play Now', '#', class: 'button accent-button' %>
          </div>
        </div>
        <div class="features-container">
          <h3>Create an account to:</h3>
          <div class="feature-grid">
            <div class="feature-card">
              <i class="fas fa-pencil-alt"></i>
              <h4>Create Questions</h4>
              <p>Craft and share your own trivia questions</p>
            </div>
            <div class="feature-card">
              <i class="fas fa-layer-group"></i>
              <h4>Custom Trivia Packs</h4>
              <p>Build packs for personal or group study</p>
            </div>
            <div class="feature-card">
              <i class="fas fa-chart-line"></i>
              <h4>Track Progress</h4>
              <p>Monitor your Bible trivia statistics</p>
            </div>
            <div class="feature-card">
              <i class="fas fa-book-open"></i>
              <h4>Choose Version</h4>
              <p>Select your preferred Bible version</p>
            </div>
            <div class="feature-card">
              <i class="fas fa-users"></i>
              <h4>Community Content</h4>
              <p>Play trivia packs curated by others</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Signup Popup -->
    <div id="signup-popup" class="popup" style="display: none;">
      <div class="popup-content">
        <span class="close">&times;</span>
        <h2>Create an Account</h2>
        <form id="signup-form">
          <input type="text" name="username" placeholder="Username" required>
          <input type="email" name="email" placeholder="Email" required>
          <input type="password" name="password" placeholder="Password" required>
          <input type="password" name="password_confirmation" placeholder="Confirm Password" required>
          <button type="submit">Sign Up</button>
        </form>
      </div>
    </div>

    <!-- Login Popup -->
    <div id="login-popup" class="popup" style="display: none;">
      <div class="popup-content">
        <span class="close">&times;</span>
        <h2>Log In</h2>
        <form id="login-form">
          <input type="email" name="email" placeholder="Email" required>
          <input type="password" name="password" placeholder="Password" required>
          <button type="submit">Log In</button>
        </form>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
        const signupButton = document.querySelector('.signup-button');
        const loginButton = document.querySelector('.login-button');
        const signupPopup = document.getElementById('signup-popup');
        const loginPopup = document.getElementById('login-popup');

        function setupPopup(button, popup) {
          const closeButton = popup.querySelector('.close');

          button.addEventListener('click', (e) => {
            e.preventDefault();
            popup.style.display = 'block';
          });

          closeButton.addEventListener('click', () => {
            popup.style.display = 'none';
          });

          window.addEventListener('click', (e) => {
            if (e.target === popup) {
              popup.style.display = 'none';
            }
          });

          const form = popup.querySelector('form');
          form.addEventListener('submit', (e) => {
            e.preventDefault();
            console.log('Form submitted');
            popup.style.display = 'none';
          });
        }

        if (signupButton) setupPopup(signupButton, signupPopup);
        if (loginButton) setupPopup(loginButton, loginPopup);
      });
    </script>
  </body>
</html>